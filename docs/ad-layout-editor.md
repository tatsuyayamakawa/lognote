# 広告レイアウトエディター

視覚的にレイアウトを確認しながら広告を配置できる新しい広告管理システムです。

## 主な機能

### 1. **ビジュアルプレビュー**
- 実際のページレイアウトを模した画面で広告の配置を確認
- PC/スマホの表示を切り替えて確認可能
- 広告サイズと配置位置が一目瞭然

### 2. **簡単な配置**
- 広告枠をクリックしてスロットIDを入力
- 配置済みの広告をクリックして編集・削除
- 直感的な操作で設定完了

### 3. **デバイス別管理**
- PCとスマホで別々の広告を設定
- デバイスごとに最適な広告サイズを選択

## 使い方

### 基本的な流れ

1. **管理画面にアクセス**
   - `/admin/ads` にアクセス
   - 新しい広告レイアウトエディターが表示されます

2. **デバイスを選択**
   - タブで「PC表示」または「スマホ表示」を選択
   - 各デバイスの広告配置を個別に設定できます

3. **広告を配置**
   - 空の広告枠をクリック
   - AdSenseのスロットIDを入力
   - Enterまたはフォーカスを外すと設定完了

4. **保存**
   - 右上の「保存」ボタンをクリック
   - すぐにサイトに反映されます

## 広告配置エリア

### PC表示の広告エリア

#### 1. タイトル下広告
- **位置**: 記事タイトルの直下
- **推奨サイズ**: 728×90 (横長バナー)
- **設定**: `article_top_pc_slot`
- **用途**: ファーストビューの広告、高い視認性

#### 2. 記事内広告
- **位置**: 2つ目のH2見出しの前
- **推奨サイズ**: 記事内広告（fluid）
- **設定**: `in_article_pc_slot`
- **用途**: コンテンツ途中の広告、高いクリック率

#### 3. コンテンツ後広告（2つ）
- **位置**: 記事本文の直後
- **推奨サイズ**: 300×250 (スクエア) × 2個横並び
- **設定**: `article_bottom_pc_slot_1`, `article_bottom_pc_slot_2`
- **用途**: コンテンツ読了後の広告

#### 4. サイドバー広告
- **位置**: サイドバー
- **推奨サイズ**: 300×600 (縦長)
- **設定**: `sidebar_pc_slot`
- **用途**: スクロールに追従、継続表示

### スマホ表示の広告エリア

#### 1. タイトル下広告
- **位置**: 記事タイトルの直下
- **推奨サイズ**: 300×250 (スクエア)
- **設定**: `article_top_mobile_slot`

#### 2. 記事内広告
- **位置**: 2つ目のH2見出しの前
- **推奨サイズ**: 300×250 (スクエア)
- **設定**: `in_article_mobile_slot`

#### 3. コンテンツ後広告
- **位置**: 記事本文の直後
- **推奨サイズ**: 300×250 (スクエア)
- **設定**: `article_bottom_mobile_slot`

#### 4. サイドバー広告
- **位置**: サイドバー相当位置
- **推奨サイズ**: 300×250 (スクエア)
- **設定**: `sidebar_mobile_slot`

## 操作ガイド

### 広告を新規配置

1. 空の広告枠（点線の枠）をクリック
2. 入力欄が表示されます
3. AdSenseのスロットIDを入力
4. Enterを押すか、他の場所をクリック
5. 広告が配置されます

### 広告を編集

1. 配置済みの広告枠をクリック
2. 入力欄が表示されます
3. スロットIDを変更
4. Enterを押すか、他の場所をクリック

### 広告を削除

1. 配置済みの広告枠の右上のゴミ箱アイコンをクリック
2. 広告が削除されます

### デバイスを切り替え

- 上部のタブで「PC表示」「スマホ表示」を切り替え
- それぞれ独立して設定できます

## AdSenseスロットIDの取得方法

1. **AdSense管理画面にログイン**
   - https://www.google.com/adsense

2. **広告ユニットを作成**
   - 「広告」→「広告ユニットごと」
   - 新しい広告ユニットを作成

3. **スロットIDをコピー**
   - 広告コードの中の `data-ad-slot="XXXXXXXXXX"` の数字部分
   - この10桁の数字がスロットID

4. **レイアウトエディターに貼り付け**
   - 数字のみを貼り付け（`data-ad-slot=` などは不要）

## ベストプラクティス

### 広告配置の基本

1. **ファーストビューに1つ**
   - タイトル下広告を設定
   - ユーザーが最初に見る広告

2. **コンテンツ途中に1つ**
   - 記事内広告を設定
   - H2が2つ以上ある記事で自動表示

3. **コンテンツ後に広告**
   - 読了後のユーザーにアピール
   - PC版は2つ横並びで効果的

4. **サイドバーに固定広告**
   - スクロールしても見える位置
   - PCユーザーに有効

### 広告サイズの選び方

#### PC広告
- **728×90**: ファーストビュー、高い視認性
- **300×250**: 汎用性が高い、どこでも使える
- **300×600**: サイドバー、長時間表示
- **記事内広告**: コンテンツに馴染む

#### スマホ広告
- **300×250**: 最も一般的、全エリアで使用可能
- **320×50**: フッター固定など（今回は未対応）

### 収益を最大化するコツ

1. **広告密度に注意**
   - 多すぎるとユーザー体験が悪化
   - AdSenseポリシーに準拠

2. **A/Bテスト**
   - 異なる配置を試す
   - AdSenseレポートで効果測定

3. **コンテンツと広告のバランス**
   - コンテンツ優先
   - 広告は補完的な位置づけ

4. **モバイルファースト**
   - スマホユーザーが多い場合は重点的に
   - 縦スクロールを意識した配置

## トラブルシューティング

### 広告が表示されない

**原因と対策:**

1. **スロットIDが間違っている**
   - AdSense管理画面で確認
   - 10桁の数字を正確に入力

2. **AdSenseアカウントの問題**
   - アカウントが有効か確認
   - ポリシー違反がないか確認

3. **広告在庫がない**
   - Googleが配信を制御
   - 時間帯や地域で変動

4. **広告ブロッカー**
   - ユーザーが広告ブロッカーを使用
   - これは正常な動作

### 設定が保存されない

**原因と対策:**

1. **ネットワークエラー**
   - インターネット接続を確認
   - 再度保存を試す

2. **セッション切れ**
   - 再ログイン
   - 設定を入力し直す

3. **ブラウザの問題**
   - ページをリロード
   - 別のブラウザで試す

### レイアウトが崩れる

**原因と対策:**

1. **ブラウザのキャッシュ**
   - ハードリロード（Ctrl+Shift+R）
   - キャッシュをクリア

2. **CSSの問題**
   - 開発者ツールでエラー確認
   - サポートに連絡

## 旧広告管理との違い

### 旧システム（フォーム形式）
- ❌ 位置が分かりにくい
- ❌ サイズが把握しにくい
- ❌ PC/スマホの対応が複雑
- ❌ 設定ミスが起きやすい

### 新システム（レイアウトエディター）
- ✅ 視覚的に配置を確認
- ✅ サイズが一目瞭然
- ✅ デバイス切り替えが簡単
- ✅ 直感的な操作

## FAQ

### Q1: 広告を一時的に非表示にできますか？
**A:** スロットIDを削除することで非表示にできます。再度表示する際は、スロットIDを入力し直してください。

### Q2: 複数の広告ネットワークを併用できますか？
**A:** このシステムはAdSense専用です。他の広告は記事内のコード埋め込み機能を使用してください。

### Q3: 広告の順番を入れ替えられますか？
**A:** 各広告エリアは固定位置です。異なる位置に配置したい場合は、別のエリアのスロットIDを変更してください。

### Q4: 自動広告との併用は？
**A:** AdSenseの自動広告と手動広告（このシステム）は併用可能ですが、広告密度に注意してください。

### Q5: モバイルアプリでも広告が表示されますか？
**A:** Webサイト向けの設定です。モバイルアプリには別途AdMobなどの設定が必要です。

## まとめ

広告レイアウトエディターを使うことで:

- ✅ **視覚的に配置確認** - 実際のレイアウトで確認
- ✅ **簡単操作** - クリックして入力するだけ
- ✅ **デバイス最適化** - PC/スマホ別々に設定
- ✅ **即座に反映** - 保存後すぐにサイトに表示

収益化をスマートに管理しましょう！
